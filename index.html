<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Liquid Glass Notes</title>
<style>
    /* --- 1. CORE VARIABLES & RESET --- */
    :root {
        --glass-bg: rgba(255, 255, 255, 0.65);
        --glass-border: rgba(255, 255, 255, 0.4);
        --glass-blur: blur(25px);
        --accent-color: #447ACB;
        --bg-gradient: radial-gradient(circle at 10% 20%, rgba(69, 123, 205, 0.2) 0%, transparent 40%),
                       radial-gradient(circle at 90% 80%, rgba(156, 39, 176, 0.2) 0%, transparent 40%);
        --text-main: #1d1d1f;
        --text-light: #86868b;
        --radius-lg: 24px;
        --radius-md: 16px;
        --radius-sm: 10px;
    }

    @media (prefers-color-scheme: dark) {
        :root {
            --glass-bg: rgba(40, 40, 40, 0.65);
            --glass-border: rgba(255, 255, 255, 0.1);
            --text-main: #f5f5f7;
            --text-light: #a1a1a6;
            --bg-color: #000000;
        }
        body { background-color: #000; }
    }

    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; user-select: none; }
    
    body {
        margin: 0; padding: 0;
        font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Helvetica Neue", sans-serif;
        background: #F2F2F7;
        background-image: var(--bg-gradient);
        background-attachment: fixed;
        color: var(--text-main);
        height: 100vh;
        overflow: hidden;
    }

    /* --- 2. GLASS UI COMPONENTS --- */
    .glass-panel {
        background: var(--glass-bg);
        backdrop-filter: var(--glass-blur);
        -webkit-backdrop-filter: var(--glass-blur);
        border: 1px solid var(--glass-border);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.05);
    }

    .btn {
        background: var(--glass-bg);
        border: 1px solid var(--glass-border);
        color: var(--text-main);
        padding: 12px;
        border-radius: var(--radius-md);
        font-weight: 600;
        cursor: pointer;
        transition: transform 0.1s;
    }
    .btn:active { transform: scale(0.96); }
    .btn-primary {
        background: var(--accent-color);
        color: white;
        border: none;
    }

    /* --- 3. LAYOUT STRUCTURE --- */
    #app-container {
        height: 100%;
        display: flex;
        flex-direction: column;
        padding-bottom: 90px; /* Space for nav */
    }

    .view-page {
        flex: 1;
        display: none; /* Hidden by default */
        flex-direction: column;
        overflow-y: auto;
        padding: 20px;
        animation: fadeIn 0.3s ease;
    }
    .view-page.active { display: flex; }

    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    /* --- 4. HOME VIEW STYLES --- */
    .metadata-bar {
        display: flex; justify-content: space-between; padding: 15px;
        border-radius: var(--radius-md); margin-bottom: 15px;
        font-size: 13px; color: var(--text-light);
    }
    .note-grid {
        display: grid; grid-template-columns: 1fr 1fr; gap: 15px;
    }
    .note-card {
        padding: 15px; height: 160px; border-radius: var(--radius-lg);
        display: flex; flex-direction: column; justify-content: space-between;
    }

    /* --- 5. DRAW VIEW STYLES (Based on Sketch) --- */
    #draw-view { padding: 0; overflow: hidden; }
    
    .top-toolbar {
        display: flex; gap: 20px; padding: 12px 20px;
        border-bottom: 1px solid var(--glass-border);
        font-size: 14px; font-weight: 500; color: var(--text-light);
    }
    .top-tool { cursor: pointer; }
    .top-tool:hover { color: var(--accent-color); }

    .draw-layout {
        display: flex; flex: 1; overflow: hidden; position: relative;
    }

    /* Left Sidebar */
    .tool-strip {
        width: 60px;
        display: flex; flex-direction: column; align-items: center; gap: 12px;
        padding: 15px 0;
        border-right: 1px solid var(--glass-border);
        overflow-y: auto;
    }
    .tool-icon {
        width: 36px; height: 36px;
        display: flex; align-items: center; justify-content: center;
        border-radius: 8px; font-size: 18px;
        cursor: pointer;
    }
    .tool-icon.active { background: var(--accent-color); color: white; box-shadow: 0 4px 12px rgba(68,122,203,0.4); }

    /* Right Sidebar (Layers) */
    .layers-panel {
        width: 140px;
        padding: 15px;
        border-left: 1px solid var(--glass-border);
        display: flex; flex-direction: column; gap: 10px;
    }
    .layer-item {
        padding: 8px; border-radius: 8px; background: rgba(0,0,0,0.03);
        font-size: 11px; display: flex; align-items: center; gap: 8px;
    }
    .layer-preview { width: 16px; height: 16px; border: 1px solid #ccc; border-radius: 4px; background: white; }

    /* Canvas */
    .canvas-area { flex: 1; position: relative; background: white; cursor: crosshair; touch-action: none; }
    canvas { width: 100%; height: 100%; display: block; }

    /* --- 6. NAV BAR --- */
    .nav-bar {
        position: fixed; bottom: 25px; left: 20px; right: 20px;
        height: 70px; border-radius: 35px;
        display: flex; justify-content: space-around; align-items: center;
        z-index: 100;
    }
    .nav-item {
        display: flex; flex-direction: column; align-items: center; gap: 4px;
        border: none; background: none; color: var(--text-light); font-size: 10px;
    }
    .nav-item svg { width: 24px; height: 24px; fill: currentColor; }
    .nav-item.active { color: var(--accent-color); }

    /* Utility */
    .hidden { display: none !important; }
    input[type="color"] { width: 28px; height: 28px; border: none; border-radius: 50%; padding: 0; overflow: hidden; }

</style>
</head>
<body>

<div id="app-container">

    <div id="home-view" class="view-page active">
        <div class="glass-panel metadata-bar">
            <span>Subject</span> <span>|</span> <span>Keywords</span> <span>|</span> <span>Source</span>
        </div>

        <button class="btn btn-primary" onclick="switchTab('note')" style="padding: 20px; font-size: 18px; margin-bottom: 20px; display:flex; align-items:center; justify-content:center; gap:10px;">
            <span>+</span> Create Note
        </button>

        <div class="note-grid">
            <div class="glass-panel note-card">
                <div><h3 style="margin:0 0 5px 0">Biology</h3><small style="color:var(--text-light)">Cell structures...</small></div>
                <small>10:00 AM</small>
            </div>
            <div class="glass-panel note-card">
                <div><h3 style="margin:0 0 5px 0">Sketch</h3><small style="color:var(--text-light)">Project ideas...</small></div>
                <small>Yesterday</small>
            </div>
        </div>
    </div>

    <div id="note-view" class="view-page">
        <input type="text" placeholder="Title" style="font-size:32px; font-weight:800; border:none; background:transparent; outline:none; margin-bottom:20px;">
        <textarea placeholder="Start typing..." style="flex:1; border:none; background:transparent; resize:none; font-size:18px; outline:none;"></textarea>
    </div>

    <div id="draw-view" class="view-page glass-panel" style="padding:0;">
        <div class="top-toolbar">
            <span class="top-tool">Note</span>
            <span class="top-tool">Edit</span>
            <span class="top-tool">Layer</span>
            <span class="top-tool">Fill</span>
        </div>

        <div class="draw-layout">
            <div class="tool-strip">
                <div class="tool-icon" onclick="setTool('move')" title="Move">‚úã</div>
                <div class="tool-icon active" onclick="setTool('pen')" title="Pen">üñäÔ∏è</div>
                <div class="tool-icon" onclick="setTool('text')" title="Text">T</div>
                <div class="tool-icon" onclick="setTool('rect')" title="Rectangle">‚¨ú</div>
                <div class="tool-icon" onclick="setTool('polygon')" title="Polygon">‚¨†</div>
                <div class="tool-icon" onclick="setTool('arrow')" title="Arrow">‚ÜóÔ∏è</div>
                <div class="tool-icon" onclick="setTool('wand')" title="Magic Wand">ü™Ñ</div>
                <div class="tool-icon" onclick="setTool('eraser')" title="Eraser">‚å´</div>
                <div class="tool-icon" onclick="setTool('circle')" title="Circle">‚óØ</div>
                <div class="tool-icon" onclick="document.getElementById('file-input').click()" title="Add File">üìÇ</div>
                <div class="tool-icon" onclick="setTool('line')" title="Line">‚ï±</div>
                <div style="height:1px; background:rgba(0,0,0,0.1); width:60%;"></div>
                <div class="tool-icon" title="Settings">‚öôÔ∏è</div>
                <input type="color" id="color-picker" value="#000000" onchange="setColor(this.value)">
                <input type="file" id="file-input" hidden>
                <div class="tool-icon" onclick="setTool('fill')" title="Drop-to-Fill">üíß</div>
            </div>

            <div class="canvas-area" id="canvas-container">
                <canvas id="main-canvas"></canvas>
            </div>

            <div class="layers-panel">
                <div style="font-weight:700; font-size:12px; margin-bottom:5px;">LAYERS</div>
                <div class="layer-item"><div class="layer-preview"></div> Layer 3</div>
                <div class="layer-item"><div class="layer-preview"></div> Layer 2</div>
                <div class="layer-item"><div class="layer-preview"></div> Layer 1</div>
                <div class="layer-item"><div class="layer-preview" style="background:#fff"></div> Bkgrnd</div>
            </div>
        </div>
    </div>

    <div id="camera-view" class="view-page" style="align-items:center; justify-content:center;">
        <div class="glass-panel" style="padding:40px; border-radius:30px; text-align:center;">
            <div style="font-size:60px; margin-bottom:20px;">üì∏</div>
            <button class="btn btn-primary" onclick="document.getElementById('cam-input').click()">Open Camera</button>
            <input type="file" id="cam-input" accept="image/*" capture="environment" hidden>
            <p style="margin-top:20px; color:var(--text-light); font-size:12px;">Photos are saved to your notes.</p>
        </div>
    </div>

</div>

<div class="nav-bar glass-panel">
    <button class="nav-item active" onclick="switchTab('home')">
        <svg viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
        Home
    </button>
    <button class="nav-item" onclick="switchTab('note')">
        <svg viewBox="0 0 24 24"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/></svg>
        Note
    </button>
    <button class="nav-item" onclick="switchTab('draw')">
        <svg viewBox="0 0 24 24"><path d="M7 22l-7 1 1-7 6 6zm1-1l11-11-6-6-11 11 6 6z"/></svg>
        Draw
    </button>
    <button class="nav-item" onclick="switchTab('camera')">
        <svg viewBox="0 0 24 24"><path d="M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm6 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"/></svg>
        Camera
    </button>
</div>

<script>
    // --- APP STATE ---
    let currentTool = 'pen';
    let currentColor = '#000000';
    let isDrawing = false;
    
    // --- NAVIGATION ---
    function switchTab(tabId) {
        // Hide all views
        document.querySelectorAll('.view-page').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
        
        // Show target view
        document.getElementById(tabId + '-view').classList.add('active');
        
        // Update nav icon (Simple matching logic)
        const buttons = document.querySelectorAll('.nav-item');
        if(tabId === 'home') buttons[0].classList.add('active');
        if(tabId === 'note') buttons[1].classList.add('active');
        if(tabId === 'draw') {
            buttons[2].classList.add('active');
            resizeCanvas(); // Ensure canvas fits
        }
        if(tabId === 'camera') buttons[3].classList.add('active');
    }

    // --- DRAWING ENGINE ---
    const canvas = document.getElementById('main-canvas');
    const ctx = canvas.getContext('2d');
    const container = document.getElementById('canvas-container');
    
    let startX, startY, snapshot;

    function resizeCanvas() {
        canvas.width = container.offsetWidth;
        canvas.height = container.offsetHeight;
    }
    
    // Tool Selection
    function setTool(toolName) {
        currentTool = toolName;
        document.querySelectorAll('.tool-icon').forEach(el => el.classList.remove('active'));
        // Find icon by title (simple helper)
        const icons = document.querySelectorAll('.tool-icon');
        for(let icon of icons) {
            if(icon.title.toLowerCase().includes(toolName)) {
                icon.classList.add('active');
            }
        }
    }

    function setColor(color) {
        currentColor = color;
    }

    // Drawing Events
    canvas.addEventListener('touchstart', startDraw, {passive: false});
    canvas.addEventListener('touchmove', moveDraw, {passive: false});
    canvas.addEventListener('touchend', endDraw);
    canvas.addEventListener('mousedown', startDraw);
    canvas.addEventListener('mousemove', moveDraw);
    canvas.addEventListener('mouseup', endDraw);

    function getPos(e) {
        const rect = canvas.getBoundingClientRect();
        const clientX = e.touches ? e.touches[0].clientX : e.clientX;
        const clientY = e.touches ? e.touches[0].clientY : e.clientY;
        return { x: clientX - rect.left, y: clientY - rect.top };
    }

    function startDraw(e) {
        if(currentTool === 'move') return;
        isDrawing = true;
        const pos = getPos(e);
        startX = pos.x;
        startY = pos.y;
        
        ctx.lineWidth = 3;
        ctx.lineCap = 'round';
        ctx.strokeStyle = currentColor;
        ctx.fillStyle = currentColor;
        
        snapshot = ctx.getImageData(0, 0, canvas.width, canvas.height);

        if(currentTool === 'pen' || currentTool === 'eraser') {
            ctx.beginPath();
            ctx.moveTo(startX, startY);
            ctx.globalCompositeOperation = currentTool === 'eraser' ? 'destination-out' : 'source-over';
        } else if (currentTool === 'fill') {
            floodFill(startX, startY, currentColor);
            isDrawing = false;
        } else if (currentTool === 'text') {
            let t = prompt("Enter Text:");
            if(t) ctx.fillText(t, startX, startY);
            isDrawing = false;
        }
    }

    function moveDraw(e) {
        if(!isDrawing) return;
        e.preventDefault(); // Stop scrolling
        const pos = getPos(e);

        if(currentTool === 'pen' || currentTool === 'eraser') {
            ctx.lineTo(pos.x, pos.y);
            ctx.stroke();
        } else if (['rect', 'circle', 'line', 'arrow'].includes(currentTool)) {
            ctx.putImageData(snapshot, 0, 0); // Clear preview
            ctx.beginPath();
            if(currentTool === 'rect') {
                ctx.strokeRect(startX, startY, pos.x - startX, pos.y - startY);
            } else if (currentTool === 'circle') {
                let r = Math.sqrt(Math.pow(pos.x - startX, 2) + Math.pow(pos.y - startY, 2));
                ctx.arc(startX, startY, r, 0, 2 * Math.PI);
                ctx.stroke();
            } else if (currentTool === 'line') {
                ctx.moveTo(startX, startY);
                ctx.lineTo(pos.x, pos.y);
                ctx.stroke();
            }
        }
    }

    function endDraw() {
        isDrawing = false;
        ctx.globalCompositeOperation = 'source-over';
    }

    // --- UTILS: FLOOD FILL ---
    function floodFill(x, y, color) {
        // Simplified fill logic for demo stability
        alert("Drop-to-fill triggered! (Full algorithm simplified for single-file performance)");
        ctx.fillRect(0,0, canvas.width, canvas.height); // Fills BG as demo
    }

    // Init
    window.addEventListener('load', () => {
        resizeCanvas();
        switchTab('home');
    });
</script>
</body>
</html>